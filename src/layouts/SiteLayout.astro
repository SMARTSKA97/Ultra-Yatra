---
const { title = "Ultra Yatra", description = "" } = Astro.props;
const path = Astro.url.pathname;
function isActive(href: string) { return path === href ? "page" : undefined; }
---
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={description} />
    <link rel="stylesheet" href="/src/styles/site.css" />
    <script>
      const saved = localStorage.getItem('theme');
      const prefers = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark':'light';
      const mode = saved || prefers;
      if (mode === 'dark') document.documentElement.classList.add('dark');
    </script>
  </head>
  <body>
    <header class="navbar">
      <div class="container row">
        <div class="row" style="gap:.75rem;">
          <strong class="brand"><a href="/">Ultra Yatra</a></strong>
          <a class="pill" href="/blog" aria-current={isActive('/blog')}>Blog</a>
          <a class="pill" href="/tags" aria-current={isActive('/tags')}>Tags</a>
          <a class="pill" href="/about" aria-current={isActive('/about')}>About</a>
        </div>
        <button id="theme-toggle" class="pill" aria-label="Toggle theme">ðŸŒ“ Theme</button>
      </div>
    </header>

    <main class="main"><div class="container"><slot /></div></main>

    <footer>
      <div class="container row">
        <small>Â© {new Date().getFullYear()} Ultra Yatra</small>
        <small><a href="/blog">All posts</a> â€¢ <a href="/rss.xml">RSS</a> â€¢ <a href="/sitemap.xml">Sitemap</a></small>
      </div>
    </footer>

    <script type="module">
      const btn = document.getElementById('theme-toggle');
      btn?.addEventListener('click', () => {
        const c = document.documentElement.classList;
        const next = c.toggle('dark') ? 'dark' : 'light';
        localStorage.setItem('theme', next);
      });
    </script>
  </body>
</html>
